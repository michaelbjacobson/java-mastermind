node {
    def app

    stage('Clone repo') {
        sh 'docker login -u AWS -p eyJwYXlsb2FkIjoiLzg5ZFhqT2NTd0xUZDI5bGFvYThubStWT3BDWi9ObjJEekpwRWxNSVBiUmpZdlozU0FzdFhiSUlpd1FrNnNDeEtya1FPNUt3RFlwRWYwWndzcUJhYThnUm81RjNOTXFiT3lYNzArK0hvdkFrMkRKMW5YS0lIZnQ4aW93YnBxWDdaSkgyUmlBTG5UeDZPY3c1blgvVUV2UHR1eDNmTkNXTTFKM25jQ2R1eDR0QzVwRmtMSE8zZU5NeGR0Vkg5YUtDcEVEdklTVkFWSnI1SlBYanVDOTduWlpEUUtxUU1rTFFhcEptU1lWQVVoaUx0d2hyK3NoUk9wVGkzUXJMYmNLQ1FzL2Y5bmpKdU9QMkZTNmNuNS9IT0xJZ3pIMU9zYTNmc2gvNnJRTXlQTFFHSGZVLytHdXN0TTZPdXpwQXdrTEhOQ1UvR3BHRlE3WHNwb1NKTCs4K1BnSDNiRC94U25jK2NucXVwOU4vc2RWZ09nWW9PQWdqVDc5MXdja29WKzhCdWZPZmNDYnh6Ui9ndHhrVC83SUxqWFA1dG1ReWpycWQ5dkxjZlVCZzgyUFNjR3NyQ1BYcHZGeHVibkxqQm1yQ09QYnBLdHc3MkZSeCtOK2ZJMVZnVDYvNmtXLytoZ0xXWW5idU9Xd2tMNUJTV1FHb25aNjBqa01hZVR3THgyMmxuMElHTElBdVhRQS8vMWlKN0Y4QW55ZXhZUWR3ek9wdzliVEtYQ0IvWkRUeVVZUE1LN0c3bk9DdFhTSHpTUVB5OU1QUjR6a3VIOTEzaSt0eXNUUW85WlVFbVgzNlhtUXJYUldweGtUUXk5VmV6U3NGeE1LbmxRV1BFTnN0THphMExQVFNyU3d1VGFvQmkwMWtGb2lVanZ6QThHaEJCaUhIcG4zTjArU1dHSzhSVUV6d1hlb1Vtd2grTU5CSnViVkZqQ0UvYTNycTNtcUJ3Y3JIUkl6YnlVUytsSDloNkY5dG54MTNpS0ZQVFhNTHZ6NGVaMjJyNGhJV0s2dGRaaTQ5REpYNi94SlpQNldXWExSSUlEMWEzZHZrVWIxREpFTU1MMWtra0hIK1ZLUEU3VXdmdlY1L1ByNDVQVlFIUUMzMkJiSHJ6cnJ4WCsyQWxZbUg4VDJwaENRY1VTYjBoYm1xUUltTk9XaE03cjdEOW84UFJlNFdpQ3YrcUZkR3o3Tml5Mk1kMDh1SkxlbXJpc1NQTDByYjNUNFZnSG1xSExVL2JLT0RtbEtDa3dCUU8wSDlJcitObklEOGhjQ2JVS3RqZjFoTFB6NTY1MFNTMkxRTFBDL0FvWEtkUFpTWTJwbUxUSVlNL2luOFNnVE5JNDFXK3o0WnY4QWh0NWYrLzBZdG5GcUt0L2FDTi9MOENjRFVQU0V2a284V21DaHRzdXJLRjVnQmlROEFkbTFMWVlSempsNmM0UXVTR3FRcmhkNEY4ZVU9IiwiZGF0YWtleSI6IkFRRUJBSGh3bTBZYUlTSmVSdEptNW4xRzZ1cWVla1h1b1hYUGU1VUZjZTlScTgvMTR3QUFBSDR3ZkFZSktvWklodmNOQVFjR29HOHdiUUlCQURCb0Jna3Foa2lHOXcwQkJ3RXdIZ1lKWUlaSUFXVURCQUV1TUJFRURIcGNiOVhpR2czT1VGQnQzQUlCRUlBNzFpczZ3TGJEZGtuUEhaL0ErRjNtM2N6TEtHdExZMnBRM2Y5N0VPYjJUS2hxVGsrSVBCY0c0dFZWRmRxVFc1SDR4bHUrNm5FdFdrVU45WG89IiwidmVyc2lvbiI6IjIiLCJ0eXBlIjoiREFUQV9LRVkiLCJleHBpcmF0aW9uIjoxNTIzMzE1ODQ1fQ== https://445579089480.dkr.ecr.us-east-1.amazonaws.com'
        checkout scm
    }

    stage('Build image') {
        app = docker.build("mastermind")
    }

}
