node {
    def app

    stage('Clone repo') {
        sh 'docker login -u AWS -p eyJwYXlsb2FkIjoibnNRcW4rY1ZQUmRUUUlNK3dMVlJxWXN5cGlyc1VZanRXOFRvMXN6Zk1XUnFmU08wYVpOdTZsVGNIYXdZYlloekc2MnZacmE3REliRndhV2Vzay8ra3FaTmRkSWMyK3prL0JUbEg1cXhTYkttallBcGpSNWgwblFEOEVKYU9JWG1IeUpKcFBQempYb2M5SmVmcTNXVHBGUzJOQ0dXbUdqeFB1SjBuZVV5NG5FeklFYUh4S1hxSkNVT0ZlTTBpaTRaNmV2WklUZU5QdUFLZFlWWlloWlp6RVVLSmNhMGNmd2p5WUxFT3dDWEJIM2QzUklNVUJzTCtPWWJ0QzB4RkVqdTFQVUpKWDY2QTBGSFJnY3AxaURPaitDc1gwUXhWK3YrN0RmWGJLTkxYbVJ3dG1acFRSRlJPZkNmamJGUnB5SG45dTlMQ0ZzMXZDT05HeEg3L01PWUxuNzdQYytiOVNFOTN4WkhjbzlhL1NGcE00bFJIbGJSVDdMZzNMd3lvUzNrZkJaWDZvTCtybmNkS3Y3SzhZMFZySkNrVzNrWFo2bTd2VHFIOWZBdWRsNkdncjBpTkhTZ0FhL0M5ZUQrWlRRRkJ0YU1MNzdpTmVaa0tpMDJteWhoanhRMGtTc3krMjJjTklxZWV3SjI0cnROeGRBNGZmYVl2WEl5ZVkwU3JzKzZlMUd6TlhWaHpPWkFtTll6cC9iUG1ONnpYeEtjSGhzUHd4eCs5a3RKMWtuSzdtTk1JUUJlb2R4N3RxNi9GVWoxWk1ENGlWT1EwOFNqQ2tvNHNyN1k0cjBJc3pja0J2ais4N1RRb0dVejNJdEJQS3c0MG1zdHh5UEdOSG56YmZ0M2I5c0tLeHliWWh5OW5OS0ZqcWFTYjFDMUJhMTljdFBJZkZsUmRqeFB6Tlk1RnExajUwY2svdmxGSjVmTzJ6MEpsRCs3WUJpdmxFamZtTzJuOTRwSXRORnVlTWp2SlFROUxxbTlERnFhdmlrZDNyVEVpV2RzMFVrSzd3MzJtU3NpSStzT28vbmFXTG5TZGswcUdrRE14NDhVR254S2FydE1QSXBLaVhZYUMrWTZJSXROeERWM290b3FtU1Juc3pIcFNrMlNuUUkyWDFLZGNray9VcjZabXBxWHRla1lWb2FpK2IvbFloMFJzUjRkT1d6dENjQ1ZVNEtvUDc4bk1RZElwZ1pEWHhBd2grdnVRWm84eTlqYkVMME1FUUhVRDdrMW1UaVFBR2dqR3JvTnlMcFp3QlNUS0EyVmhGVWtOMnhXS29IUHl6eUNGaEIyZTJqU21nWnhmNFhoQm04MFV4UWlFbzdkV3pXaW5qakh3cXdRM0Jhc1pZYnVCVEFnS2gyVFVsRGgveXlNR3FkaExSSXJZUDMvendzRlBlT3hidXZsUnhJU1lJUWZjOVNRQnpqZllwdWFHT1RJV2E4TURzNGNGVmM9IiwiZGF0YWtleSI6IkFRRUJBSGh3bTBZYUlTSmVSdEptNW4xRzZ1cWVla1h1b1hYUGU1VUZjZTlScTgvMTR3QUFBSDR3ZkFZSktvWklodmNOQVFjR29HOHdiUUlCQURCb0Jna3Foa2lHOXcwQkJ3RXdIZ1lKWUlaSUFXVURCQUV1TUJFRUREMW9NQzdibFpXb3hmZjlCZ0lCRUlBN2xZa3B4c1VoNmhmOTNxWW1iemMwVU1nUCtncGJZTENvZ1MyNTY0d1p4aEg0MkxOUDRhTkhpK1lFYVRJUnhtbnBLclY2REgrSWFzbzdiT3M9IiwidmVyc2lvbiI6IjIiLCJ0eXBlIjoiREFUQV9LRVkiLCJleHBpcmF0aW9uIjoxNTIzMzE2NDc3fQ== https://445579089480.dkr.ecr.us-east-1.amazonaws.com'
        checkout scm
    }

    stage('Build image') {
        app = docker.build("mastermind")
    }

}
