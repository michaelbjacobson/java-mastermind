node {
    def app

    stage('Clone repo') {
        sh 'docker login -u AWS -p eyJwYXlsb2FkIjoidDV5blBiOGJXLzJUVW9HdTIvR0E5RlNWQXF2SWYzTDNiOSt1QmsvNUxWQzFHeFBGRis0N1oxU3hzRE81dEhNVk11QXlTRXhiWTJLR0lUL0JXOTUxOFo4N1dFWjRNd1U3M3BxcUxycWdJNk9NSGtXZmF2UEtCZG9zZlhzTkoyaTFYcDJWbzk0WXBmd2pIclN4WkdYU2lZanB5UDVUdkUwcjdRRnVmREJJQlpmTllxOEs3c1pHdFNSNGRlMWR4RDNDZkNRdjhMRDVZMGFnUFZVSU5BcUhaaXlFOE5NY3dGOVhJOUJ0d0g2M0dpcGh5Qnc3VVArS1JjZzRuTnBtYUV5TnhEVlVPa0ZTb0FRYkxSQy9tVnB2cThxcWhyNVRwRTNUWklTdHlsN093ZWxSZDFNVTNRc2dRd284bDI5cW54Vkt3V2xXbDl3eG5QdEs4Zlh3endwM1VlaDZRZDA4U1JtSmFOSlNzY3M4cWFXaEprTnRiUmhpNnd2WjdxYnVlMGJPSWhJZXkzMld4alQwNVAvK01Ed2xGRjZ0UDBuL1NndHZMRjB6ZlBTeWphTm5vZjk2eGZkczdoVUVMZG5yQk1nbjBta0pzWVorcGFObGRyVlQ0bGZlRUlOKzVyVUlLNjlJQ1RCaWl1SVhFdVNWR0ZxMmtJVkR2VC82WDJYZjJ0OEZvQlNDNldiYXc2WHQ0aG5hVSt5bmE0eEtqVkZ0QnF2b0ZqUWxhNEtSWnM0ZmpsRURHSUVCb281czdDWC84MTFoZDlpdGhvSFo2Q05NRitremZXdXZIZ2YwRzY3ZkpCNlpsa1YxdXJIdG5lMkJ0Sit6dmdyTmQ1YlBuOGs5alc5ZmRyaURUSXRnTWhHeEpFSFpMVVVSY3hxWFJwRkxVT1FidnBoRDNUSVJGY0FhWXhLeHN4NlFLZ01ybDFpQkVVOWZqQnN4NmdKUHFvalY1UERBTFdhQ1BmaWR2Q2pTdEQ2UU1hQzM1TjE4RXk2WWRSbStOQU9uUE9pZkoyRm4wZHdWbjk0ZDZCQUpXdW1obndBWlJ3SEtCSVhkRk9YZDAyejdKRWNFbDlBM0x2UkNlRGtZMkd1UEdOTHBTR1VQMVp0SWx3NDMyRnY4ckpkR2xrTnpoV3hwZ29xU1hLTnRkQjVHZzQwNFNibWU1ZVo0U3REU0dPSFVPdnlaS0U5VGpmWnZwa1NrWFdmVWhtVERMV2NNaktIM05yQWF2WjlVU05JR2MwaW9zUjhzWkdabFMyb25NSWw0UWdWMnZmd1RDZFVNQWlMa0IxOFJMTHFZaEFIZE9rQzZXbFFneUYyUGxqVnpQSG82VkxYR3dwNnA3Y01PUSt2dFBJQTBvemFTRUljdDV3YzVPeW5ab1huMXVZMnpYSWZSWUxOUDdYdzdSWVUzdHM4OFNlZysvbmxYMWVHMHoxeDJuWEw1VUFmb1JKbmMvVmc9IiwiZGF0YWtleSI6IkFRRUJBSGh3bTBZYUlTSmVSdEptNW4xRzZ1cWVla1h1b1hYUGU1VUZjZTlScTgvMTR3QUFBSDR3ZkFZSktvWklodmNOQVFjR29HOHdiUUlCQURCb0Jna3Foa2lHOXcwQkJ3RXdIZ1lKWUlaSUFXVURCQUV1TUJFRURGUk1DOWtnZDFxbTN1UFBzZ0lCRUlBNzVOUkRrQitDM0NJbkxvSko4Y3QycUxoNENKU2N4QXRYSzZzUFBQd1pLalMxdVp2Y05GeWlYQ1czM1ZzVDYyS1pGZ1FkeHBpcHNzNVhObkU9IiwidmVyc2lvbiI6IjIiLCJ0eXBlIjoiREFUQV9LRVkiLCJleHBpcmF0aW9uIjoxNTIzMzE4Mjc1fQ== https://445579089480.dkr.ecr.us-east-1.amazonaws.com'
        checkout scm
    }

    stage('Build image') {
        app = docker.build("mastermind")
    }
}